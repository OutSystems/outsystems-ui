/*! Patterns - Utilities - Button Loading */
////
/// @group Patterns-Button_Loading
/// Patterns - Utilities - Button Loading

/* -------------------------------------------------------------------------------
NOTE:
.btn-show-label, .btn-loading & .btn-label and this 
------------------------------------------------------------------------------- */
.is--loading {
	.btn {
		pointer-events: none;
	}

	.btn-loading {
		display: inline-flex;
	}

	.btn-label {
		opacity: 0;
	}

	&:not(.btn-show-label) {
		.btn {
			.btn-loading {
				.loading-spinner {
					margin: 0;
				}
			}
		}
	}

	&.show-spinner-only {
		.btn {
			.loading-spinner {
				margin: 0;
			}
		}
	}
}

.btn-loading {
	display: none;
	position: absolute;

	.loading-spinner {
		@extend %loading-spinner;
	}
}

.btn-show-label {
	.btn-loading {
		position: relative;
	}

	.btn-label {
		opacity: 1;
	}
}

///
.osui-btn-loading {
	&:not(.btn-show-label) {
		.btn {
			& > *:not(.btn-loading):not(.loading-spinner):not(.btn-label) {
				display: none;
			}
		}

		&.is--loading {
			.btn {
				.btn-label {
					display: none;
				}
			}
		}
	}

	&.show-spinner-only {
		&.is--loading {
			.btn {
				font-size: 0;
			}
		}
	}

	&.is--loading {
		pointer-events: none;

		.btn {
			display: inline-flex;
			pointer-events: none;
		}
	}

	&:not(.is--loading) {
		.btn {
			.loading-spinner {
				display: none;
			}
		}
	}

	.btn {
		transition: none;
		display: inline-block;

		// ServiceStudio Preview
		& {
			-servicestudio-display: inline-flex;
		}

		& > * {
			font-size: var(--font-size-s);
			vertical-align: middle;
		}

		.btn-loading {
			margin: var(--space-none);
			position: relative;
		}

		.loading-spinner {
			@extend %loading-spinner;
		}
	}
}

///
%loading-spinner {
	animation: loadingSpinner 850ms cubic-bezier(0.7, 1.05, 0.78, 0.78) infinite;
	border: var(--border-size-m) solid currentColor;
	border-radius: var(--border-radius-circle);
	border-top: var(--border-size-m) solid transparent;
	height: 16px;
	margin-right: var(--space-s);
	width: 16px;
	will-change: transform;

	// ServiceStudio Preview
	& {
		-servicestudio-margin-right: var(--space-s);
	}
}

// IsRTL -------------------------------------------------------------------------
///
.is-rtl {
	.osui-btn-loading {
		.btn {
			.loading-spinner {
				margin-left: var(--space-s);
				margin-right: var(--space-none);
			}
		}
	}
}
