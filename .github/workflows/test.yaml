name: Test Workflow

on:
    push:
        paths:
            - 'test/README.md'
            - 'test/README.MD'

permissions:
    contents: read

jobs:
    test:
        runs-on: ubuntu-latest

        steps:
            - name: ðŸ“¥ Checkout repository
              uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2

            - name: ðŸ”Ž Display triggered file changes
              run: |
                  echo "Test workflow triggered by README change in test folder"
                  echo "Commit: ${{ github.sha }}"
                  echo "Branch: ${{ github.ref_name }}"

            - name: ðŸ“„ Show README content
              run: |
                  cat test/README.md || cat test/README.MD || echo "README not found"

    deploy-docs:
        needs: test
        permissions:
            id-token: write
            contents: write
        uses: ./.github/workflows/create-n-deploy-docs.yaml
        with:
            branch-name: ${{ github.ref_name }}
            delete-branch: true
            run-lint: true
        secrets:
            OSUI_AZURE_CLIENT_ID: ${{ secrets.OSUI_AZURE_CLIENT_ID }}
            OSUI_AZURE_TENANT_ID: ${{ secrets.OSUI_AZURE_TENANT_ID }}
            OSUI_AZURE_SUBSCRIPTION_ID: ${{ secrets.OSUI_AZURE_SUBSCRIPTION_ID }}
