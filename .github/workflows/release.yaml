name: Release of OutSystems UI

on:
    workflow_dispatch:
        inputs:
            new-version:
                description: 'Version to be released.'
                type: string
                required: true
            update-prerelease-into-latest:
                description: 'Update pre-release into latest.'
                type: boolean
                default: true
            delete-rc-branch:
                description: 'Delete rc* branch at the end of process.'
                type: boolean
                default: true

permissions:
    contents: read

jobs:
    set-release-latest:
        name: üè∑Ô∏è Set Release as Latest
        permissions:
            id-token: write
            contents: write
        #uses: OutSystems/ui-components.github-reusable-workflows/.github/workflows/release.yaml@7ffd7f90f6e5016bd92d0e050d2516084b99c2f6 #v0.2.5
        uses: ./.github/workflows/template-release.yaml
        with:
            new-version: ${{ inputs.new-version }}
            update-prerelease-into-latest: ${{ inputs.update-prerelease-into-latest }}
            delete-rc-branch: ${{ inputs.delete-rc-branch }}
        secrets:
            OSUI_AZURE_CLIENT_ID: ${{ secrets.OSUI_AZURE_CLIENT_ID }}
            OSUI_AZURE_TENANT_ID: ${{ secrets.OSUI_AZURE_TENANT_ID }}
            OSUI_AZURE_SUBSCRIPTION_ID: ${{ secrets.OSUI_AZURE_SUBSCRIPTION_ID }}